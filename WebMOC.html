<!DOCTYPE html>
<html>
<head>
<title>WebMOC</title>
 
<link rel="stylesheet" href="assets/css/jquery.mobile-1.3.2.min.css" />
<script type="text/javascript" src="assets/js/jquery.js"></script>
<script type="text/javascript" src="assets/js/jquery.mobile-1.3.2.min.js"></script>

</head>
 
<body>
This is Web MOC controller. 
<div data-role="controlgroup" data-type="horizontal">
    <a href="#" id="btnPrev" data-role="button">Prev</a>
    <a href="#" id="btnPlay" data-role="button">Play</a>
    <a href="#" id="btnNext" data-role="button">Next</a>
    <a href="#" id="btnPause" data-role="button">Pause</a>
    <a href="#" id="btnStop" data-role="button">Stop</a>
</div>
<div data-role="fieldcontain" data-type="horizontal">
    <fieldset data-role="controlgroup">
        <label for="swShuffle">Shuffle:</label>
        <select name ="swShuffle" id = "swShuffle" data-role="slider">
            <option value="Off">Off</option>
            <option value="On">On</option>
        </select>
    </fieldset>
    <fieldset data-role="controlgroup">
        <label for="swRepeat">Repeat:</label>
        <select name ="swRepeat" id = "swRepeat" data-role="slider">
            <option value="Off">Off</option>
            <option value="On">On</option>
        </select>
    </fieldset>
    <fieldset data-role="controlgroup">
        <label for="swAutoNext">AutoNext:</label>
        <select name ="swAutoNext" id = "swAutoNext" data-role="slider">
            <option value="Off">Off</option>
            <option value="On">On</option>
        </select>
    </fieldset>
</div>
<script>
    var ctlpage = 'ctl';
    var gShuffle = 'Off';
    var gRepeat = 'On';
    var gAutoNext = 'On';
    //button action 
    $("#btnPrev").click(function(){
        $.ajax
        ({
            type: 'POST',
            url: ctlpage,
            data:JSON.stringify({"do":"Prev"}),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function(data){
                $.each(data, function(index, value){
                    //alert("index: " + index + " , value: "+ value);
                    if(index == "ack" && value != 0)
                        alert("Error : " + value);
                });
            }
        });
    });

    $("#btnPlay").click(function(){
        $.ajax
        ({
            type: 'POST',
            url: ctlpage,
            data:JSON.stringify({"do":"Play"}),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function(data){
                $.each(data, function(index, value){
                    //alert("index: " + index + " , value: "+ value);
                    if(index == "ack" && value != 0)
                        alert("Error : " + value);
                });
            }
        });
    });

    $("#btnNext").click(function(){
        $.ajax
        ({
            type: 'POST',
            url: ctlpage,
            data:JSON.stringify({"do":"Next"}),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function(data){
                $.each(data, function(index, value){
                    //alert("index: " + index + " , value: "+ value);
                    if(index == "ack" && value != 0)
                        alert("Error : " + value);
                });
            }
        });
    });
    
    $("#btnPause").click(function(){
        $.ajax
        ({
            type: 'POST',
            url: ctlpage,
            data:JSON.stringify({"do":"Pause"}),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function(data){
                $.each(data, function(index, value){
                    //alert("index: " + index + " , value: "+ value);
                    if(index == "ack" && value != 0)
                        alert("Error : " + value);
                });
            }
        });
    });
    $("#btnStop").click(function(){
        $.ajax
        ({
            type: 'POST',
            url: ctlpage,
            data:JSON.stringify({"do":"Stop"}),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            success: function(data){
                $.each(data, function(index, value){
                    //alert("index: " + index + " , value: "+ value);
                    if(index == "ack" && value != 0)
                        alert("Error : " + value);
                });
            }
        });
    });

    //Toggle switch
    $("#swShuffle").change(function(){
        //set value to player
        //alert("Toggle Shuffle set : " + $(this).val());
        var value = $(this).val();
        if (value != gShuffle){
            gShuffle = value
            $.ajax({
                type: 'POST',
                url: ctlpage,
                data:JSON.stringify({"do":"Toggles", "Shuffle":value}),
                contentType: "application/json; charset=utf-8",
                dataType: 'json'
            });
        }
    });

    $("#swRepeat").change(function(){
        //set value to player
        var value = $(this).val();
        if (value != gRepeat){
            gRepeat = value
            $.ajax({
                type: 'POST',
                url: ctlpage,
                data:JSON.stringify({"do":"Toggles", "Repeat":value}),
                contentType: "application/json; charset=utf-8",
                dataType: 'json'
            });
        }
    });

    $("#swAutoNext").change(function(){
        //set value to player
        var value = $(this).val();
        if (value != gAutoNext){
            gAutoNext = value
            $.ajax({
                type: 'POST',
                url: ctlpage,
                data:JSON.stringify({"do":"Toggles", "AutoNext":value}),
                contentType: "application/json; charset=utf-8",
                dataType: 'json'
            });
        }
    });
</script>
</body>
</html>
